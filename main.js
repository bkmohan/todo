(()=>{"use strict";function e(e){let t;try{t=window[e];const d="__storage_test__";return t.setItem(d,d),t.removeItem(d),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}const t=e=>{switch(e){case"low":return"#42a5f5";case"medium":return"#ff6f00";case"high":return"#d32f2f"}},d={weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},o={weekday:"short",month:"short",day:"numeric"},a={hour:"numeric",minute:"numeric"},i=(e,i)=>{let n=document.createElement("div");n.classList.add("todos");let l=document.createElement("div");l.classList.add("todo-list-header");let r=document.createElement("h2");if(r.classList.add("title"),r.textContent=i,l.appendChild(r),"Today"!=i&&"Inbox"!=i){let e=document.createElement("button");e.classList.add("delete-project"),e.textContent="Delete",l.appendChild(e)}if(n.appendChild(l),0==e.length)return n;for(let l=0;l<e.length;l++){let r=document.createElement("div");r.classList.add("todo"),r.setAttribute("data-id",e[l].id);let s=document.createElement("div");s.classList.add("todo-list");let c=document.createElement("div"),u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("name","check");let p=document.createElement("p");p.classList.add("todo-title"),p.textContent=e[l].title,c.appendChild(u),c.appendChild(p);let h=document.createElement("div"),m=document.createElement("p");m.classList.add("todo-date");let y=e[l].dueDate.toLocaleDateString("en-US",o);"Today"==i&&(y="Today "+e[l].dueDate.toLocaleTimeString("en-US",a)),m.textContent=y;let f=document.createElement("img");f.classList.add("edit-todo"),f.setAttribute("src","./images/edit.svg"),f.setAttribute("alt","edit-btn");let E=document.createElement("img");E.classList.add("delete-todo"),E.setAttribute("src","./images/delete.svg"),E.setAttribute("alt","delete-btn"),h.appendChild(m),h.appendChild(f),h.appendChild(E),s.appendChild(c),s.appendChild(h);let g=document.createElement("div");g.classList.add("todo-details");let j=document.createElement("div"),v=document.createElement("p");v.innerHTML=`<p><span class="detail-head">Title:</span> ${e[l].title}</p>`;let L=document.createElement("p"),S=e[l].dueDate.toLocaleDateString("en-US",d);L.innerHTML=`<p><span class="detail-head">Due Date:</span> ${S}</p>`;let k=document.createElement("p");k.innerHTML=`<p><span class="detail-head">Priority:</span> ${e[l].priority.toUpperCase()}</p>`,j.appendChild(v),j.appendChild(L),j.appendChild(k);let b=document.createElement("div");b.classList.add("description");let D=document.createElement("p");D.innerHTML='<p><span class="detail-head">Description</span></p>';let w=document.createElement("p");w.textContent=e[l].details,b.appendChild(D),b.appendChild(w),g.appendChild(j),g.appendChild(b),r.appendChild(s),r.appendChild(g),r.style=`\n                        border: 1px solid #f0f0f0;\n                        border-left: 4px solid ${t(e[l].priority)};\n                    `,s.addEventListener("click",(t=>{let d=document.querySelector(`div.todo[data-id="${e[l].id}"] > div.todo-details`);"flex"===d.style.display?d.style.display="none":d.style.display="flex"})),e[l].done&&(u.checked=!0,r.classList.add("finished")),n.appendChild(r)}return n},n=document.querySelector(".content"),l=document.querySelector("#add-project"),r=document.querySelector("#add-todo"),s=document.querySelector(".modal-wrapper"),c=document.querySelector(".modal--new-project"),u=document.querySelector(".modal--add-task"),p=document.querySelector(".custom-projects"),h=document.querySelectorAll(".project-name"),m=document.querySelector("#home"),y=document.querySelector("#menu"),f=document.querySelectorAll(".modal-close"),E=document.querySelectorAll(".modal-x"),g=document.querySelector("#add-new-project"),j=document.querySelector("#add-new-task"),v=document.querySelector("#edit-task-btn");let L=document.querySelector("#project-name"),S=document.querySelector("#body-title"),k=document.querySelector("#body-date"),b=document.querySelector("#body-desc"),D=document.querySelector("#body-project"),w=document.querySelector("#body-priority"),q=new class{randomDate(e,t,d,o){var a=new Date(+e+Math.random()*(t-e)),i=d+Math.random()*(o-d)|0;return a.setHours(i),a}projectsList=["Inbox","Home","College","Creative","Work"];todoList=[];sampleData=[{project:"Inbox",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Home",title:"new mail",dueDate:new Date,details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Work",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!0},{project:"Inbox",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"College",title:"new mail",dueDate:new Date,details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Inbox",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Home",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Inbox",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!0},{project:"College",title:"new mail",dueDate:new Date,details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Work",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Home",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Inbox",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!0},{project:"College",title:"new mail",dueDate:new Date,details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"Work",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1},{project:"College",title:"new mail",dueDate:this.randomDate(1,30,5,16),details:"djfhdsjkfhdsjkfh",priority:"high",done:!1}].forEach((e=>this.addTodo(e.project,e.title,e.dueDate,e.details,e.priority,e.done)));constructor(){if(e("localStorage")&&(localStorage.getItem("todos")&&JSON.parse(localStorage.getItem("todos")).forEach((e=>this.addTodo(e.project,e.title,e.dueDate,e.details,e.priority,e.done))),localStorage.getItem("todoProject"))){let e=JSON.parse(localStorage.getItem("todoProject"));this.projectsList=e}}updateLocalStorageTodos(){e("localStorage")&&localStorage.setItem("todos",JSON.stringify(this.todoList))}updateLocalStorageProjects(){e("localStorage")&&localStorage.setItem("todoProject",JSON.stringify(this.projectsList))}getProjectsList(){return this.projectsList}addNewProject(e){this.projectsList.push(e),this.updateLocalStorageProjects()}deleteProject(e){let t=this.projectsList.indexOf(e);this.projectsList.splice(t,1),this.todoList=this.todoList.filter((t=>t.project!=e)),this.updateLocalStorageProjects(),this.updateLocalStorageTodos()}addTodo(e,t,d,o,a,i){this.todoList.push(this._createTodo(e,t,d,o,a,i)),this.updateLocalStorageTodos()}getTodos(e){return this.todoList.filter((t=>t.project==e))}getTodoById(e){for(let t=0;t<this.todoList.length;t++)if(this.todoList[t].id==e)return this.todoList[t]}updateTodo(e,t){for(let d=0;d<this.todoList.length;d++)if(this.todoList[d].id==e){this.todoList[d].project=t.project,this.todoList[d].title=t.title,this.todoList[d].dueDate=t.dueDate,this.todoList[d].details=t.details,this.todoList[d].priority=t.priority,this.todoList[d].done=t.done,this.updateLocalStorageTodos();break}}updateTaskStatus(e,t){for(let d=0;d<this.todoList.length;d++)if(this.todoList[d].id==e){this.todoList[d].done=t,this.updateLocalStorageTodos();break}}getTodayTodos(){let e=new Date;return this.todoList.filter((t=>e.toDateString()==t.dueDate.toDateString()))}getAllTodos(){return this.todoList}deleteTodo(e){let t=-1;for(let d=0;d<this.todoList.length;d++)if(e==this.todoList[d].id){t=d,this.updateLocalStorageTodos();break}this.todoList.splice(t,1),this.updateLocalStorageTodos()}_createTodo(e,t,d,o,a,i){let n=Math.random().toString(16).slice(2);return"string"==typeof d&&(d=new Date(d)),{id:n,project:e,title:t,dueDate:d,details:o,priority:a,done:i}}};function T(e){let t=document.createElement("li");t.classList.add("project-name"),t.textContent=e,p.appendChild(t),t.addEventListener("click",I)}function C(e){"add-todo"==e.target.id?(document.querySelector("#editTask").style.display="none",document.querySelector("#edit-task-btn").style.display="none",document.querySelector("#newTask").style.display="block",document.querySelector("#add-new-task").style.display="inline-block"):(document.querySelector("#editTask").style.display="block",document.querySelector("#edit-task-btn").style.display="inline-block",document.querySelector("#newTask").style.display="none",document.querySelector("#add-new-task").style.display="none"),s.style.display="block",u.style.display="block",D.innerHTML="",q.getProjectsList().forEach((e=>{let t=document.createElement("option");t.setAttribute("value",e),t.textContent=e,D.appendChild(t)}))}function x(e){s.style.display="none",e.target.parentElement.parentElement.style.display="none";let t=document.querySelectorAll(`.${e.target.parentElement.parentElement.classList[0]} input`),d=document.querySelector(`.${e.target.parentElement.parentElement.classList[0]} textarea`),o=document.querySelectorAll(`.${e.target.parentElement.parentElement.classList[0]} select`);t.forEach((e=>{e.value="",e.style.borderColor="",e.style.boxShadow=""})),d&&(d.value="",d.style.borderColor="",d.style.boxShadow=""),o.forEach((e=>{e.selectedIndex=0})),document.querySelectorAll(`.${e.target.parentElement.parentElement.classList[0]} .invalid-feedback`).forEach((e=>{e.style.display="none"}))}function A(e,t,d){d?(e.style.display="none",t.style.borderColor="#719ECE",t.style.boxShadow="0 0 10px #719ECE"):(e.style.display="block",t.style.borderColor="#dc3545",t.style.boxShadow="0 0 10px #dc3545")}function I(e){M(e.target)}function M(e){let t=e.textContent.trim();document.querySelectorAll(".sidebar .project-name").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),n.innerHTML="","Today"==t?n.appendChild(i(q.getTodayTodos(t),"Today")):n.appendChild(i(q.getTodos(t),t)),"Today"!=t&&"Inbox"!=t&&document.querySelector(".delete-project").addEventListener("click",O),document.querySelectorAll(".delete-todo").forEach((e=>{e.addEventListener("click",H)})),document.querySelectorAll(".edit-todo").forEach((e=>{e.addEventListener("click",_)})),document.querySelectorAll('input[name="check"]').forEach((e=>{e.addEventListener("change",P)}))}function P(e){let t=e.target.parentElement.parentElement.parentElement.getAttribute("data-id");e.target.checked?(q.updateTaskStatus(t,!0),e.target.parentElement.parentElement.parentElement.classList.add("finished")):(q.updateTaskStatus(t,!1),e.target.parentElement.parentElement.parentElement.classList.remove("finished"))}function H(e){q.deleteTodo(e.target.parentElement.parentElement.parentElement.getAttribute("data-id")),M(document.querySelector(".project-name.active"))}function _(e){let t=e.target.parentElement.parentElement.parentElement.getAttribute("data-id");C(e),function(e){let t=q.getTodoById(e);S.value=t.title,k.value=t.dueDate.toISOString().substring(0,16),b.value=t.details;for(let e=0;e<D.options.length;e++)if(D.options[e].value==t.project){D.options[e].selected=!0;break}for(let e=0;e<w.options.length;e++)if(w.options[e].value==t.priority){w.options[e].selected=!0;break}v.setAttribute("data-id",e)}(t)}function O(e){let t=document.querySelector("h2.title").textContent;q.deleteProject(t),M(document.querySelector(".today")),document.querySelector(".custom-projects").innerHTML="",q.getProjectsList().forEach((e=>T(e)))}l.addEventListener("click",(e=>{s.style.display="block",c.style.display="block"})),r.addEventListener("click",C),f.forEach((e=>e.addEventListener("click",(e=>{x(e)})))),E.forEach((e=>e.addEventListener("click",(e=>{x(e)})))),L.addEventListener("input",(e=>{let t=document.querySelector("#project-name + div.invalid-feedback");L.validity.valueMissing?A(t,L,!1):A(t,L,!0)})),S.addEventListener("input",(e=>{let t=document.querySelector("#body-title + div.invalid-feedback");S.validity.valueMissing?A(t,S,!1):A(t,S,!0)})),k.addEventListener("input",(e=>{let t=document.querySelector("#body-date + div.invalid-feedback");k.validity.valueMissing?A(t,k,!1):A(t,k,!0)})),b.addEventListener("input",(e=>{let t=document.querySelector("#body-desc + div.invalid-feedback");b.validity.valueMissing?A(t,b,!1):A(t,b,!0)})),g.addEventListener("click",(e=>{L.value?(q.addNewProject(L.value),T(L.value),x(e)):L.dispatchEvent(new Event("input"))})),j.addEventListener("click",(e=>{S.value&&k.value&&b.value?(q.addTodo(D.value,S.value,new Date(k.value),b.value,w.value),x(e),M(document.querySelector(".sidebar .active"))):(S.dispatchEvent(new Event("input")),k.dispatchEvent(new Event("input")),b.dispatchEvent(new Event("input")))})),h.forEach((e=>e.addEventListener("click",I))),v.addEventListener("click",(e=>{if(S.value&&k.value&&b.value){let t={project:D.value,title:S.value,dueDate:new Date(k.value),details:b.value,priority:w.value},d=e.target.getAttribute("data-id");q.updateTodo(d,t),e.target.setAttribute("data-id",""),x(e),M(document.querySelector(".sidebar .active"))}else S.dispatchEvent(new Event("input")),k.dispatchEvent(new Event("input")),b.dispatchEvent(new Event("input"))})),m.addEventListener("click",(e=>{M(document.querySelector(".today"))}));let $=!0;y.addEventListener("click",(e=>{$?(document.querySelector(".sidebar").style.width="0",$=!1):(document.querySelector(".sidebar").style.width="20%",$=!0)})),q.getProjectsList().forEach((e=>{"Inbox"!=e&&T(e)})),M(document.querySelector(".today"))})();